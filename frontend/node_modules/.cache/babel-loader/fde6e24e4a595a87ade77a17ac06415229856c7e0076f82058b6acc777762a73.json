{"ast":null,"code":"var _jsxFileName = \"D:\\\\m\\xF4n chi\\u1EC1u th\\u1EE9 2\\\\DACK_CT2\\\\frontend\\\\src\\\\components\\\\pages\\\\admin\\\\Product\\\\ProductForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { createProduct, updateProduct } from \"../../../services/productService\";\nimport { getBrands } from \"../../../services/brandService\";\nimport { getCategories } from \"../../../services/categoryService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductForm = ({\n  onClose,\n  onProductAdded,\n  editProduct\n}) => {\n  _s();\n  const [productData, setProductData] = useState({\n    name: \"\",\n    price: \"\",\n    stock: \"\",\n    description: \"\",\n    size: \"\",\n    colors: \"\",\n    brand: \"\",\n    category: \"\",\n    image: null\n  });\n  useEffect(() => {\n    if (editProduct) {\n      var _editProduct$brand, _editProduct$category;\n      setProductData({\n        name: editProduct.name,\n        price: editProduct.price,\n        stock: editProduct.stock,\n        description: editProduct.description,\n        size: editProduct.size ? editProduct.size.join(\", \") : \"\",\n        colors: editProduct.colors ? editProduct.colors.join(\", \") : \"\",\n        brand: ((_editProduct$brand = editProduct.brand) === null || _editProduct$brand === void 0 ? void 0 : _editProduct$brand._id) || \"\",\n        category: ((_editProduct$category = editProduct.category) === null || _editProduct$category === void 0 ? void 0 : _editProduct$category._id) || \"\",\n        image: null\n      });\n    }\n  }, [editProduct]);\n  const [brands, setBrands] = useState([]);\n  const [categories, setCategories] = useState([]);\n  useEffect(() => {\n    fetchBrands();\n    fetchCategories();\n  }, []);\n  const fetchBrands = async () => setBrands(await getBrands());\n  const fetchCategories = async () => setCategories(await getCategories());\n  const handleChange = e => {\n    setProductData({\n      ...productData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleFileChange = e => {\n    setProductData({\n      ...productData,\n      image: e.target.files[0]\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!productData.name || !productData.price || !productData.stock || !productData.brand || !productData.category) {\n      return alert(\"Vui lòng nhập đầy đủ thông tin!\");\n    }\n    const formData = new FormData();\n    formData.append(\"name\", productData.name);\n    formData.append(\"price\", productData.price);\n    formData.append(\"stock\", productData.stock);\n    formData.append(\"description\", productData.description);\n    formData.append(\"size\", JSON.stringify(productData.size.split(\",\").map(s => Number(s.trim()))));\n    formData.append(\"colors\", JSON.stringify(productData.colors.split(\",\").map(c => c.trim())));\n    formData.append(\"brand\", productData.brand);\n    formData.append(\"category\", productData.category);\n    if (productData.image) formData.append(\"image\", productData.image);\n    try {\n      editProduct ? await updateProduct(editProduct._id, formData) : await createProduct(formData);\n      onProductAdded();\n      onClose();\n    } catch (error) {\n      alert(\"Lỗi khi xử lý sản phẩm!\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 12\n  }, this);\n};\n_s(ProductForm, \"9vaTliHSMKTn6zAH1fJY0VHvzig=\");\n_c = ProductForm;\nexport default ProductForm;\nvar _c;\n$RefreshReg$(_c, \"ProductForm\");","map":{"version":3,"names":["React","useState","useEffect","createProduct","updateProduct","getBrands","getCategories","jsxDEV","_jsxDEV","ProductForm","onClose","onProductAdded","editProduct","_s","productData","setProductData","name","price","stock","description","size","colors","brand","category","image","_editProduct$brand","_editProduct$category","join","_id","brands","setBrands","categories","setCategories","fetchBrands","fetchCategories","handleChange","e","target","value","handleFileChange","files","handleSubmit","preventDefault","alert","formData","FormData","append","JSON","stringify","split","map","s","Number","trim","c","error","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/môn chiều thứ 2/DACK_CT2/frontend/src/components/pages/admin/Product/ProductForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { createProduct, updateProduct } from \"../../../services/productService\";\r\nimport { getBrands } from \"../../../services/brandService\";\r\nimport { getCategories } from \"../../../services/categoryService\";\r\n\r\nconst ProductForm = ({ onClose, onProductAdded, editProduct }) => {\r\n    const [productData, setProductData] = useState({\r\n        name: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        description: \"\",\r\n        size: \"\",\r\n        colors: \"\",\r\n        brand: \"\",\r\n        category: \"\",\r\n        image: null,\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (editProduct) {\r\n            setProductData({\r\n                name: editProduct.name,\r\n                price: editProduct.price,\r\n                stock: editProduct.stock,\r\n                description: editProduct.description,\r\n                size: editProduct.size ? editProduct.size.join(\", \") : \"\",\r\n                colors: editProduct.colors ? editProduct.colors.join(\", \") : \"\",\r\n                brand: editProduct.brand?._id || \"\",\r\n                category: editProduct.category?._id || \"\",\r\n                image: null,\r\n            });\r\n        }\r\n    }, [editProduct]);\r\n\r\n    const [brands, setBrands] = useState([]);\r\n    const [categories, setCategories] = useState([]);\r\n\r\n    useEffect(() => {\r\n        fetchBrands();\r\n        fetchCategories();\r\n    }, []);\r\n\r\n    const fetchBrands = async () => setBrands(await getBrands());\r\n    const fetchCategories = async () => setCategories(await getCategories());\r\n\r\n    const handleChange = (e) => {\r\n        setProductData({ ...productData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleFileChange = (e) => {\r\n        setProductData({ ...productData, image: e.target.files[0] });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!productData.name || !productData.price || !productData.stock || !productData.brand || !productData.category) {\r\n            return alert(\"Vui lòng nhập đầy đủ thông tin!\");\r\n        }\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"name\", productData.name);\r\n        formData.append(\"price\", productData.price);\r\n        formData.append(\"stock\", productData.stock);\r\n        formData.append(\"description\", productData.description);\r\n        formData.append(\"size\", JSON.stringify(productData.size.split(\",\").map(s => Number(s.trim()))));\r\n        formData.append(\"colors\", JSON.stringify(productData.colors.split(\",\").map(c => c.trim())));\r\n        formData.append(\"brand\", productData.brand);\r\n        formData.append(\"category\", productData.category);\r\n        if (productData.image) formData.append(\"image\", productData.image);\r\n\r\n        try {\r\n            editProduct ? await updateProduct(editProduct._id, formData) : await createProduct(formData);\r\n            onProductAdded();\r\n            onClose();\r\n        } catch (error) {\r\n            alert(\"Lỗi khi xử lý sản phẩm!\");\r\n        }\r\n    };\r\n\r\n    return <form onSubmit={handleSubmit}>{/* Form fields here */}</form>;\r\n};\r\n\r\nexport default ProductForm;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,aAAa,EAAEC,aAAa,QAAQ,kCAAkC;AAC/E,SAASC,SAAS,QAAQ,gCAAgC;AAC1D,SAASC,aAAa,QAAQ,mCAAmC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElE,MAAMC,WAAW,GAAGA,CAAC;EAAEC,OAAO;EAAEC,cAAc;EAAEC;AAAY,CAAC,KAAK;EAAAC,EAAA;EAC9D,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGd,QAAQ,CAAC;IAC3Ce,IAAI,EAAE,EAAE;IACRC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE,EAAE;IACTC,WAAW,EAAE,EAAE;IACfC,IAAI,EAAE,EAAE;IACRC,MAAM,EAAE,EAAE;IACVC,KAAK,EAAE,EAAE;IACTC,QAAQ,EAAE,EAAE;IACZC,KAAK,EAAE;EACX,CAAC,CAAC;EAEFtB,SAAS,CAAC,MAAM;IACZ,IAAIU,WAAW,EAAE;MAAA,IAAAa,kBAAA,EAAAC,qBAAA;MACbX,cAAc,CAAC;QACXC,IAAI,EAAEJ,WAAW,CAACI,IAAI;QACtBC,KAAK,EAAEL,WAAW,CAACK,KAAK;QACxBC,KAAK,EAAEN,WAAW,CAACM,KAAK;QACxBC,WAAW,EAAEP,WAAW,CAACO,WAAW;QACpCC,IAAI,EAAER,WAAW,CAACQ,IAAI,GAAGR,WAAW,CAACQ,IAAI,CAACO,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;QACzDN,MAAM,EAAET,WAAW,CAACS,MAAM,GAAGT,WAAW,CAACS,MAAM,CAACM,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;QAC/DL,KAAK,EAAE,EAAAG,kBAAA,GAAAb,WAAW,CAACU,KAAK,cAAAG,kBAAA,uBAAjBA,kBAAA,CAAmBG,GAAG,KAAI,EAAE;QACnCL,QAAQ,EAAE,EAAAG,qBAAA,GAAAd,WAAW,CAACW,QAAQ,cAAAG,qBAAA,uBAApBA,qBAAA,CAAsBE,GAAG,KAAI,EAAE;QACzCJ,KAAK,EAAE;MACX,CAAC,CAAC;IACN;EACJ,CAAC,EAAE,CAACZ,WAAW,CAAC,CAAC;EAEjB,MAAM,CAACiB,MAAM,EAAEC,SAAS,CAAC,GAAG7B,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAAC8B,UAAU,EAAEC,aAAa,CAAC,GAAG/B,QAAQ,CAAC,EAAE,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACZ+B,WAAW,CAAC,CAAC;IACbC,eAAe,CAAC,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMD,WAAW,GAAG,MAAAA,CAAA,KAAYH,SAAS,CAAC,MAAMzB,SAAS,CAAC,CAAC,CAAC;EAC5D,MAAM6B,eAAe,GAAG,MAAAA,CAAA,KAAYF,aAAa,CAAC,MAAM1B,aAAa,CAAC,CAAC,CAAC;EAExE,MAAM6B,YAAY,GAAIC,CAAC,IAAK;IACxBrB,cAAc,CAAC;MAAE,GAAGD,WAAW;MAAE,CAACsB,CAAC,CAACC,MAAM,CAACrB,IAAI,GAAGoB,CAAC,CAACC,MAAM,CAACC;IAAM,CAAC,CAAC;EACvE,CAAC;EAED,MAAMC,gBAAgB,GAAIH,CAAC,IAAK;IAC5BrB,cAAc,CAAC;MAAE,GAAGD,WAAW;MAAEU,KAAK,EAAEY,CAAC,CAACC,MAAM,CAACG,KAAK,CAAC,CAAC;IAAE,CAAC,CAAC;EAChE,CAAC;EAED,MAAMC,YAAY,GAAG,MAAOL,CAAC,IAAK;IAC9BA,CAAC,CAACM,cAAc,CAAC,CAAC;IAClB,IAAI,CAAC5B,WAAW,CAACE,IAAI,IAAI,CAACF,WAAW,CAACG,KAAK,IAAI,CAACH,WAAW,CAACI,KAAK,IAAI,CAACJ,WAAW,CAACQ,KAAK,IAAI,CAACR,WAAW,CAACS,QAAQ,EAAE;MAC9G,OAAOoB,KAAK,CAAC,iCAAiC,CAAC;IACnD;IAEA,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEhC,WAAW,CAACE,IAAI,CAAC;IACzC4B,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEhC,WAAW,CAACG,KAAK,CAAC;IAC3C2B,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEhC,WAAW,CAACI,KAAK,CAAC;IAC3C0B,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAEhC,WAAW,CAACK,WAAW,CAAC;IACvDyB,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAClC,WAAW,CAACM,IAAI,CAAC6B,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,CAAC,IAAIC,MAAM,CAACD,CAAC,CAACE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/FT,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAEC,IAAI,CAACC,SAAS,CAAClC,WAAW,CAACO,MAAM,CAAC4B,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACI,CAAC,IAAIA,CAAC,CAACD,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3FT,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEhC,WAAW,CAACQ,KAAK,CAAC;IAC3CsB,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEhC,WAAW,CAACS,QAAQ,CAAC;IACjD,IAAIT,WAAW,CAACU,KAAK,EAAEoB,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEhC,WAAW,CAACU,KAAK,CAAC;IAElE,IAAI;MACAZ,WAAW,GAAG,MAAMR,aAAa,CAACQ,WAAW,CAACgB,GAAG,EAAEgB,QAAQ,CAAC,GAAG,MAAMzC,aAAa,CAACyC,QAAQ,CAAC;MAC5FjC,cAAc,CAAC,CAAC;MAChBD,OAAO,CAAC,CAAC;IACb,CAAC,CAAC,OAAO6C,KAAK,EAAE;MACZZ,KAAK,CAAC,yBAAyB,CAAC;IACpC;EACJ,CAAC;EAED,oBAAOnC,OAAA;IAAMgD,QAAQ,EAAEf;EAAa;IAAAgB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAA+B,CAAC;AACxE,CAAC;AAAC/C,EAAA,CA3EIJ,WAAW;AAAAoD,EAAA,GAAXpD,WAAW;AA6EjB,eAAeA,WAAW;AAAC,IAAAoD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}