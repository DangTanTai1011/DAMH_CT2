{"ast":null,"code":"var _jsxFileName = \"D:\\\\m\\xF4n chi\\u1EC1u th\\u1EE9 2\\\\DACK_CT2\\\\frontend\\\\src\\\\components\\\\pages\\\\Cart\\\\CartPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { createOrder } from \"../../services/orderService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartPage = ({\n  cartItems,\n  clearCart\n}) => {\n  _s();\n  const [message, setMessage] = useState(\"\");\n  const [selectedItems, setSelectedItems] = useState(cartItems.map(item => item._id));\n  const toggleItemSelection = id => {\n    setSelectedItems(prev => prev.includes(id) ? prev.filter(itemId => itemId !== id) : [...prev, id]);\n  };\n  const handleQuantityChange = (id, delta) => {\n    const updatedCart = cartItems.map(item => item._id === id ? {\n      ...item,\n      quantity: Math.max(1, item.quantity + delta)\n    } : item);\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n    window.location.reload();\n  };\n  const handleCheckout = async () => {\n    try {\n      const itemsToOrder = cartItems.filter(item => selectedItems.includes(item._id));\n      const totalPrice = itemsToOrder.reduce((sum, item) => sum + item.price * item.quantity, 0);\n      const orderData = {\n        items: itemsToOrder.map(item => ({\n          productId: item._id,\n          quantity: item.quantity,\n          price: item.price\n        })),\n        totalPrice\n      };\n      await createOrder(orderData);\n      setMessage(\"‚úÖ ƒê·∫∑t h√†ng th√†nh c√¥ng!\");\n      clearCart();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setMessage(\"‚ùå L·ªói khi ƒë·∫∑t h√†ng: \" + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message));\n    }\n  };\n  const totalSelectedPrice = cartItems.filter(item => selectedItems.includes(item._id)).reduce((sum, item) => sum + item.price * item.quantity, 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83D\\uDED2 Gi\\u1ECF h\\xE0ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Gi\\u1ECF h\\xE0ng tr\\u1ED1ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: cartItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n        style: {\n          marginBottom: \"10px\",\n          borderBottom: \"1px solid #ccc\",\n          paddingBottom: \"10px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: selectedItems.includes(item._id),\n          onChange: () => toggleItemSelection(item._id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `http://localhost:5000${item.imageUrl}`,\n          alt: item.name,\n          style: {\n            width: \"60px\",\n            marginRight: \"10px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 29\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 58\n        }, this), \"Gi\\xE1: \", item.price, \" VND \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 51\n        }, this), \"S\\u1ED1 l\\u01B0\\u1EE3ng:\", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleQuantityChange(item._id, -1),\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 29\n        }, this), item.quantity, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleQuantityChange(item._id, 1),\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 29\n        }, this)]\n      }, item._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: [\"T\\u1ED5ng ti\\u1EC1n: \", totalSelectedPrice.toLocaleString(), \" VND\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleCheckout,\n      disabled: selectedItems.length === 0,\n      children: [\"Thanh to\\xE1n (\", selectedItems.length, \" s\\u1EA3n ph\\u1EA9m)\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\n_s(CartPage, \"vcAWsiXJ3FfbpSlx8ph+OmLfmOs=\");\n_c = CartPage;\nexport default CartPage;\nvar _c;\n$RefreshReg$(_c, \"CartPage\");","map":{"version":3,"names":["React","useState","createOrder","jsxDEV","_jsxDEV","CartPage","cartItems","clearCart","_s","message","setMessage","selectedItems","setSelectedItems","map","item","_id","toggleItemSelection","id","prev","includes","filter","itemId","handleQuantityChange","delta","updatedCart","quantity","Math","max","localStorage","setItem","JSON","stringify","window","location","reload","handleCheckout","itemsToOrder","totalPrice","reduce","sum","price","orderData","items","productId","error","_error$response","_error$response$data","response","data","totalSelectedPrice","children","fileName","_jsxFileName","lineNumber","columnNumber","length","style","marginBottom","borderBottom","paddingBottom","type","checked","onChange","src","imageUrl","alt","name","width","marginRight","onClick","toLocaleString","disabled","_c","$RefreshReg$"],"sources":["D:/m√¥n chi·ªÅu th·ª© 2/DACK_CT2/frontend/src/components/pages/Cart/CartPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { createOrder } from \"../../services/orderService\";\r\n\r\nconst CartPage = ({ cartItems, clearCart }) => {\r\n    const [message, setMessage] = useState(\"\");\r\n    const [selectedItems, setSelectedItems] = useState(cartItems.map(item => item._id));\r\n\r\n    const toggleItemSelection = (id) => {\r\n        setSelectedItems(prev =>\r\n            prev.includes(id) ? prev.filter(itemId => itemId !== id) : [...prev, id]\r\n        );\r\n    };\r\n\r\n    const handleQuantityChange = (id, delta) => {\r\n        const updatedCart = cartItems.map(item =>\r\n            item._id === id ? { ...item, quantity: Math.max(1, item.quantity + delta) } : item\r\n        );\r\n        localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\r\n        window.location.reload();\r\n    };\r\n\r\n    const handleCheckout = async () => {\r\n        try {\r\n            const itemsToOrder = cartItems.filter(item => selectedItems.includes(item._id));\r\n            const totalPrice = itemsToOrder.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n            const orderData = {\r\n                items: itemsToOrder.map(item => ({\r\n                    productId: item._id,\r\n                    quantity: item.quantity,\r\n                    price: item.price\r\n                })),\r\n                totalPrice\r\n            };\r\n\r\n            await createOrder(orderData);\r\n            setMessage(\"‚úÖ ƒê·∫∑t h√†ng th√†nh c√¥ng!\");\r\n            clearCart();\r\n        } catch (error) {\r\n            setMessage(\"‚ùå L·ªói khi ƒë·∫∑t h√†ng: \" + (error.response?.data?.message || error.message));\r\n        }\r\n    };\r\n\r\n    const totalSelectedPrice = cartItems\r\n        .filter(item => selectedItems.includes(item._id))\r\n        .reduce((sum, item) => sum + item.price * item.quantity, 0);\r\n\r\n    return (\r\n        <div>\r\n            <h2>üõí Gi·ªè h√†ng</h2>\r\n            {cartItems.length === 0 ? (\r\n                <p>Gi·ªè h√†ng tr·ªëng</p>\r\n            ) : (\r\n                <ul>\r\n                    {cartItems.map(item => (\r\n                        <li key={item._id} style={{ marginBottom: \"10px\", borderBottom: \"1px solid #ccc\", paddingBottom: \"10px\" }}>\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                checked={selectedItems.includes(item._id)}\r\n                                onChange={() => toggleItemSelection(item._id)}\r\n                            />\r\n                            <img src={`http://localhost:5000${item.imageUrl}`} alt={item.name} style={{ width: \"60px\", marginRight: \"10px\" }} />\r\n                            <strong>{item.name}</strong> <br />\r\n                            Gi√°: {item.price} VND <br />\r\n                            S·ªë l∆∞·ª£ng: \r\n                            <button onClick={() => handleQuantityChange(item._id, -1)}>-</button>\r\n                            {item.quantity}\r\n                            <button onClick={() => handleQuantityChange(item._id, 1)}>+</button>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n\r\n            <h4>T·ªïng ti·ªÅn: {totalSelectedPrice.toLocaleString()} VND</h4>\r\n\r\n            <button onClick={handleCheckout} disabled={selectedItems.length === 0}>\r\n                Thanh to√°n ({selectedItems.length} s·∫£n ph·∫©m)\r\n            </button>\r\n\r\n            {message && <p>{message}</p>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CartPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}